{% extends 'base.html.twig' %}

{% block title %}PCStore{% endblock %}

{% block navhome %}
active
{% endblock %}
{% block stylesheets %}
    <link href="https://cdn.datatables.net/v/bs5/dt-1.13.4/r-2.4.1/sc-2.1.1/sb-1.4.2/datatables.min.css" rel="stylesheet"/>
{% endblock %}
{% block javascripts %}
    <script src="https://cdn.datatables.net/v/bs5/dt-1.13.4/r-2.4.1/sc-2.1.1/sb-1.4.2/datatables.min.js"></script>
{% endblock %}

{% block body %}
    {% block headerdiv %}
        {% endblock %}
<div class="container">
    <div class="row gutters-sm mt-5">
{#        <div class="col-md-1 d-none d-md-block mt-3">#}
{#            <div class="card">#}
{#        <div class="card-body">#}
{#            <nav class="nav flex-column nav-pills nav-gap-y-1">#}
{#                <a href="#users" data-bs-toggle="tab" class="nav-item nav-link has-icon nav-link-faded active">#}
{#                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user me-2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>User Management#}
{#                </a>#}
{#                <a href="#product" data-bs-toggle="tab" class="nav-item nav-link has-icon nav-link-faded">#}
{#                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="-4 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="bi bi-box me-1" >#}
{#                        <path d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5 8 5.961 14.154 3.5 8.186 1.113zM15 4.239l-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"/>#}
{#                    </svg> Product Management#}
{#                </a>#}
{#                <a href="#location" data-bs-toggle="tab" class="nav-item nav-link has-icon nav-link-faded">#}
{#                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-shield me-2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>Location Management#}
{#                </a>#}
{#            </nav>#}
{#        </div>#}
{#            </div>#}
{#        </div>#}
        <div class="col-md-12">
            <div class="card">
                <div class="card-header border-bottom mb-3 d-flex">
                    <ul class="nav nav-tabs card-header-tabs nav-gap-x-1" role="tablist">
                        <li class="nav-item">
                            <a href="#users" data-bs-toggle="tab" class="nav-link has-icon active"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user me-2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                                <span class="d-none d-md-inline-block">Users</span></a>
                        </li>
                        <li class="nav-item">
                            <a href="#product" data-bs-toggle="tab" class="nav-link has-icon"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="-2 -2 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="me-2">
                                    <path d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2l-2.218-.887zm3.564 1.426L5.596 5 8 5.961 14.154 3.5l-2.404-.961zm3.25 1.7-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"/>
                            </svg><span class="d-none d-md-inline-block">Products</span></a>
                        </li>
                        <li class="nav-item">
                            <a href="#location" data-bs-toggle="tab" class="nav-link has-icon"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="-2 -2 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="me-2">
                                    <path fill-rule="evenodd" d="M3.1 11.2a.5.5 0 0 1 .4-.2H6a.5.5 0 0 1 0 1H3.75L1.5 15h13l-2.25-3H10a.5.5 0 0 1 0-1h2.5a.5.5 0 0 1 .4.2l3 4a.5.5 0 0 1-.4.8H.5a.5.5 0 0 1-.4-.8l3-4z"/>
                                    <path fill-rule="evenodd" d="M8 1a3 3 0 1 0 0 6 3 3 0 0 0 0-6zM4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999z"/>
                                </svg><span class="d-none d-md-inline-block">Locations</span></a>
                        </li>
                        <li class="nav-item">
                            <a href="#discount" data-bs-toggle="tab" class="nav-link has-icon"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="-2 -2 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="me-2">
                                    <path fill-rule="evenodd" d="M3.1 11.2a.5.5 0 0 1 .4-.2H6a.5.5 0 0 1 0 1H3.75L1.5 15h13l-2.25-3H10a.5.5 0 0 1 0-1h2.5a.5.5 0 0 1 .4.2l3 4a.5.5 0 0 1-.4.8H.5a.5.5 0 0 1-.4-.8l3-4z"/>
                                    <path fill-rule="evenodd" d="M8 1a3 3 0 1 0 0 6 3 3 0 0 0 0-6zM4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999z"/>
                                </svg><span class="d-none d-md-inline-block">Discounts</span></a>
                        </li>
                    </ul>
                </div>
                <div class="card-body tab-content">
                    <div class="tab-pane active" id="users">
                        <h4 class="text-light">Users</h4>
                        <div class="table-responsive">
                            <table id="usertable" class="table table-striped rounded users">
                                <thead class="thead-dark">
                                <tr>
                                    <th scope="row">Email</th>
                                    <th scope="row">Name</th>
                                    <th scope="row">Actions</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for usr in users %}
                                    <tr>
                                        <th scope="row">{{ usr.email }}</th>
                                        <td>{{ usr.firstName }} {{ usr.lastName }}</td>
                                        <td></td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="tab-pane" id="product">
                        <h4 class="text-light">Products</h4>
{#                        <div class="table-responsive">#}
                            <table id="producttable" class="table table-striped display nowrap rounded products" style="width:100%;">
                                <thead class="thead-light">
                                <tr>
                                    <th></th>
                                    <th scope="col">SKU</th>
                                    <th scope="col">Name</th>
                                    <th scope="col">Type</th>
                                    <th scope="col">Created At</th>
                                    <th scope="col">Price</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">UID</th>
                                    <th scope="col">Actions</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for prod in products %}
                                    <tr>
                                        <td></td>
                                        <td>{{ prod.sku }}</td>
                                        <td class="pname">{{ prod.name }}</td>
                                        <td>{{ prod.type }}</td>
                                        <td>{{ prod.createdAt|date('d/m/Y') }}</td>
                                        <td>{{ prod.price }}</td>
                                        <td>{{ prod.status }}</td>
                                        <td>{{ prod.uid }}</td>

                                        <td><a class="btn btn-dark" href="{{ path('app_product',{id:prod.uid}) }}"><i class="bi bi-info-circle"></i></a><a class="btn btn-dark" href="{{ path('app_edit_product',{product_id: prod.uid}) }}"><i class="bi bi-pencil-square"></i></a><button type="button" class="btn btn-dark conbtn" data-bs-toggle="modal" data-href="{{ path('app_delete_product',{product_id: prod.uid}) }}" data-bs-target="#confirmModal"><i class="bi bi-trash"></i></button></td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
{#                        </div>#}
                    </div>
                    <div class="tab-pane" id="location">
                        <h4 class="text-light">Locations</h4>
                        <div class="table-responsive">
                            <table id="locationtable" class="table table-striped rounded locations">
                                <thead class="thead-light">
                                <tr>
                                    <th scope="col">ID</th>
                                    <th scope="col">Name</th>
                                    <th scope="col">Address</th>
                                    <th scope="col">Actions</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for loc in locations %}
                                    <tr>
                                        <th scope="row">{{ loc.id }}</th>
                                        <td class="pname">{{ loc.name }}</td>
                                        <td>{{ loc.address }}</td>
                                        <td><a class="btn btn-dark" href="{{ path('app_edit_location',{id: loc.id}) }}"><i class="bi bi-pencil-square"></i></a><button type="button" class="btn btn-dark conbtn" data-bs-toggle="modal" data-href="{{ path('app_delete_location',{id:loc.id}) }}" data-bs-target="#confirmModal"><i class="bi bi-trash"></i></button></td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="tab-pane" id="discount">
                        <h4 class="text-light">Discounts</h4>
                        <div class="table-responsive">
                            <table id="locationtable" class="table table-striped rounded locations">
                                <thead class="thead-light">
                                <tr>
                                    <th scope="col">ID</th>
                                    <th scope="col">Code</th>
                                    <th scope="col">Discount</th>
                                    <th scope="col">Uses Left</th>
                                    <th scope="col">Expires at</th>
                                    <th scope="col">Created At</th>
                                    <th scope="col">Last Modified</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for discount in discounts %}
                                    <tr>
                                        <th scope="row">{{ discount.id }}</th>
                                        <td class="pname">{{ discount.code }}</td>
                                        <td>{{ discount.price }}
                                            {% if discount.percentage %}
                                                %
                                            {% else %}
                                                RON
                                            {% endif %}
                                        </td>
                                        <td>{{ discount.uses }}</td>
                                        <td>{{ discount.expiration | date("d/m/Y H:i",app.user.country.timezones.0.zoneName) }}</td>
                                        <td>{{ discount.createdAt | date("d/m/Y H:i",app.user.country.timezones.0.zoneName) }}</td>
                                        <td>{{ discount.modifiedAt | date("d/m/Y H:i",app.user.country.timezones.0.zoneName) }}</td>

{#                                        <td><a class="btn btn-dark" href="{{ path('app_edit_location',{id: loc.id}) }}"><i class="bi bi-pencil-square"></i></a><button type="button" class="btn btn-dark conbtn" data-bs-toggle="modal" data-href="{{ path('app_delete_location',{id:loc.id}) }}" data-bs-target="#confirmModal"><i class="bi bi-trash"></i></button></td>#}
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    <div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="confirmModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmTitle">Confirmation Message</h5>
{#                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">#}
{#                        <span aria-hidden="true">&times;</span>#}
{#                    </button>#}
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer justify-content-center">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" id="modConfirmBtn" class="btn btn-primary">Confirm</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block javascriptsend %}

    <script src="/js/adminmenu.js"></script>
{% endblock %}
